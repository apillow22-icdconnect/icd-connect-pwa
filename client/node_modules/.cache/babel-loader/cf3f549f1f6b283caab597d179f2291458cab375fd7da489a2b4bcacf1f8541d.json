{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{Box,Paper,TextField,Button,Typography,List,ListItem,ListItemText,ListItemAvatar,Avatar,Divider,FormControl,InputLabel,Select,MenuItem,Chip,IconButton,Dialog,DialogTitle,DialogContent,DialogActions,Tabs,Tab,Alert,Tooltip,Badge}from'@mui/material';import{Send,Group,Person,Delete,MoreVert,Inbox,Send as SentIcon,Refresh,Clear,Work}from'@mui/icons-material';import{useAuth}from'../../contexts/AuthContext';import axios from'axios';import io from'socket.io-client';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Messages=()=>{const{user}=useAuth();const[messages,setMessages]=useState([]);const[teamMembers,setTeamMembers]=useState([]);const[newMessage,setNewMessage]=useState('');const[selectedRecipient,setSelectedRecipient]=useState('');const[isGroupMessage,setIsGroupMessage]=useState(true);const[socket,setSocket]=useState(null);const[selectedMessage,setSelectedMessage]=useState(null);const[deleteDialogOpen,setDeleteDialogOpen]=useState(false);const[currentBox,setCurrentBox]=useState('inbox');const[loading,setLoading]=useState(false);const messagesEndRef=useRef(null);useEffect(()=>{fetchMessages();fetchTeamMembers();// Socket.io connection disabled for production deployment\n// Initialize socket connection\n// const newSocket = io('http://localhost:5000');\n// setSocket(newSocket);\n// newSocket.emit('join-room', user.teamId);\n// newSocket.on('new-message', (message) => {\n//   if (currentBox === 'inbox') {\n//     setMessages(prev => [message, ...prev]);\n//   }\n// });\n// return () => newSocket.close();\n},[user.teamId,currentBox]);useEffect(()=>{scrollToBottom();},[messages]);const scrollToBottom=()=>{var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:'smooth'});};const fetchMessages=async()=>{setLoading(true);try{const response=await axios.get(\"/api/messages?box=\".concat(currentBox));setMessages(response.data);}catch(error){console.error('Error fetching messages:',error);}finally{setLoading(false);}};const fetchTeamMembers=async()=>{try{const response=await axios.get('/api/users/team');setTeamMembers(response.data.filter(member=>member.id!==user.id));}catch(error){console.error('Error fetching team members:',error);}};const handleSendMessage=async()=>{if(!newMessage.trim())return;try{const messageData={content:newMessage,recipientId:isGroupMessage?null:selectedRecipient,isGroupMessage};const response=await axios.post('/api/messages',messageData);// Socket.io disabled for production deployment\n// if (socket) {\n//   socket.emit('send-message', {\n//     ...response.data.data,\n//     roomId: user.teamId\n//   });\n// }\nsetNewMessage('');setSelectedRecipient('');// Refresh messages if in sent box\nif(currentBox==='sent'){fetchMessages();}}catch(error){console.error('Error sending message:',error);}};const handleDeleteMessage=async messageId=>{try{await axios.delete(\"/api/messages/\".concat(messageId));setMessages(prev=>prev.filter(msg=>msg.id!==messageId));setDeleteDialogOpen(false);setSelectedMessage(null);}catch(error){console.error('Error deleting message:',error);}};const handleBoxChange=(event,newValue)=>{setCurrentBox(newValue);};const canDeleteMessage=message=>{return message.senderId===user.id||user.role==='admin';};const formatTime=timestamp=>{return new Date(timestamp).toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'});};const formatDate=timestamp=>{return new Date(timestamp).toLocaleDateString();};const getMessageRecipient=message=>{if(message.isGroupMessage)return'Group';if(message.senderId===user.id){const recipient=teamMembers.find(m=>m.id===message.recipientId);return recipient?\"To: \".concat(recipient.name):'To: Unknown';}return'';};return/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",gutterBottom:true,children:\"Team Messages\"}),/*#__PURE__*/_jsxs(Paper,{sx:{height:'80vh',display:'flex',flexDirection:'column'},children:[/*#__PURE__*/_jsxs(Box,{sx:{p:3,borderBottom:1,borderColor:'divider'},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',gap:2,mb:3},children:[/*#__PURE__*/_jsxs(FormControl,{size:\"small\",sx:{minWidth:120},children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Message Type\"}),/*#__PURE__*/_jsxs(Select,{value:isGroupMessage?'group':'private',label:\"Message Type\",onChange:e=>{setIsGroupMessage(e.target.value==='group');setSelectedRecipient('');},children:[/*#__PURE__*/_jsxs(MenuItem,{value:\"group\",children:[/*#__PURE__*/_jsx(Group,{sx:{mr:1}}),\"Group\"]}),/*#__PURE__*/_jsxs(MenuItem,{value:\"private\",children:[/*#__PURE__*/_jsx(Person,{sx:{mr:1}}),\"Private\"]})]})]}),!isGroupMessage&&/*#__PURE__*/_jsxs(FormControl,{size:\"small\",sx:{minWidth:200},children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Recipient\"}),/*#__PURE__*/_jsx(Select,{value:selectedRecipient,label:\"Recipient\",onChange:e=>setSelectedRecipient(e.target.value),children:teamMembers.map(member=>/*#__PURE__*/_jsx(MenuItem,{value:member.id,children:member.name},member.id))})]})]}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',gap:2,alignItems:'flex-end'},children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,multiline:true,rows:4,placeholder:\"Type your message here... (Press Ctrl+Enter to send)\",value:newMessage,onChange:e=>setNewMessage(e.target.value),onKeyDown:e=>{if(e.key==='Enter'&&e.ctrlKey){e.preventDefault();handleSendMessage();}},sx:{'& .MuiInputBase-root':{fontSize:'1rem',lineHeight:1.5}}}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:handleSendMessage,disabled:!newMessage.trim()||!isGroupMessage&&!selectedRecipient,sx:{minWidth:'auto',px:3,py:2,height:'fit-content'},children:/*#__PURE__*/_jsx(Send,{})})]})]}),/*#__PURE__*/_jsx(Box,{sx:{borderBottom:1,borderColor:'divider'},children:/*#__PURE__*/_jsxs(Tabs,{value:currentBox,onChange:handleBoxChange,sx:{px:2},children:[/*#__PURE__*/_jsx(Tab,{value:\"inbox\",label:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',gap:1},children:[/*#__PURE__*/_jsx(Inbox,{}),\"Inbox\"]})}),/*#__PURE__*/_jsx(Tab,{value:\"sent\",label:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',gap:1},children:[/*#__PURE__*/_jsx(SentIcon,{}),\"Sent\"]})})]})}),/*#__PURE__*/_jsx(Box,{sx:{flexGrow:1,overflow:'auto',p:2},children:loading?/*#__PURE__*/_jsx(Box,{sx:{display:'flex',justifyContent:'center',p:4},children:/*#__PURE__*/_jsx(Typography,{children:\"Loading messages...\"})}):messages.length===0?/*#__PURE__*/_jsx(Box,{sx:{display:'flex',justifyContent:'center',p:4},children:/*#__PURE__*/_jsx(Typography,{color:\"text.secondary\",children:currentBox==='inbox'?'No messages in inbox':'No sent messages'})}):/*#__PURE__*/_jsxs(List,{children:[messages.map(message=>{var _message$senderName;return/*#__PURE__*/_jsxs(ListItem,{sx:{flexDirection:'column',alignItems:'flex-start',mb:2,p:0},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',width:'100%',mb:1},children:[/*#__PURE__*/_jsx(ListItemAvatar,{children:/*#__PURE__*/_jsx(Avatar,{children:(_message$senderName=message.senderName)===null||_message$senderName===void 0?void 0:_message$senderName.charAt(0)})}),/*#__PURE__*/_jsx(ListItemText,{primary:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',gap:1,flexWrap:'wrap'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",sx:{fontWeight:'bold'},children:message.senderName}),message.type==='shift_assignment'&&/*#__PURE__*/_jsx(Chip,{label:\"Shift Assignment\",size:\"small\",color:\"success\",icon:/*#__PURE__*/_jsx(Work,{})}),!message.isGroupMessage&&!message.type&&/*#__PURE__*/_jsx(Chip,{label:\"Private\",size:\"small\",color:\"secondary\",icon:/*#__PURE__*/_jsx(Person,{})}),message.senderId===user.id&&/*#__PURE__*/_jsx(Chip,{label:\"You\",size:\"small\",color:\"primary\"}),currentBox==='sent'&&!message.isGroupMessage&&/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"text.secondary\",children:getMessageRecipient(message)})]}),secondary:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',gap:1},children:[/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"text.secondary\",children:formatTime(message.timestamp)}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"text.secondary\",children:formatDate(message.timestamp)})]})}),/*#__PURE__*/_jsx(Box,{sx:{display:'flex',gap:1},children:canDeleteMessage(message)&&/*#__PURE__*/_jsx(Tooltip,{title:\"Delete message\",children:/*#__PURE__*/_jsx(IconButton,{size:\"small\",color:\"error\",onClick:()=>{setSelectedMessage(message);setDeleteDialogOpen(true);},children:/*#__PURE__*/_jsx(Delete,{})})})})]}),/*#__PURE__*/_jsx(Paper,{sx:{p:3,backgroundColor:message.type==='shift_assignment'?'success.light':message.senderId===user.id?'primary.light':'grey.100',color:message.senderId===user.id?'white':'text.primary',maxWidth:'85%',wordBreak:'break-word',boxShadow:2,borderRadius:2,border:message.type==='shift_assignment'?'2px solid #4caf50':'none'},children:/*#__PURE__*/_jsx(Typography,{variant:\"body1\",sx:{lineHeight:1.6},children:message.content})})]},message.id);}),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]})}),/*#__PURE__*/_jsxs(Box,{sx:{p:2,borderTop:1,borderColor:'divider',display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",color:\"text.secondary\",children:[messages.length,\" message\",messages.length!==1?'s':'',\" in \",currentBox]}),/*#__PURE__*/_jsx(Tooltip,{title:\"Refresh messages\",children:/*#__PURE__*/_jsx(IconButton,{onClick:fetchMessages,size:\"small\",children:/*#__PURE__*/_jsx(Refresh,{})})})]})]}),/*#__PURE__*/_jsxs(Dialog,{open:deleteDialogOpen,onClose:()=>setDeleteDialogOpen(false),maxWidth:\"sm\",fullWidth:true,children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"\\uD83D\\uDDD1\\uFE0F Delete Message\"}),/*#__PURE__*/_jsxs(DialogContent,{children:[/*#__PURE__*/_jsx(Alert,{severity:\"warning\",sx:{mb:2},children:\"This action cannot be undone.\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",sx:{mb:2},children:\"Are you sure you want to delete this message?\"}),selectedMessage&&/*#__PURE__*/_jsx(Paper,{sx:{p:2,backgroundColor:'grey.50'},children:/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",children:[\"\\\"\",selectedMessage.content.substring(0,100),selectedMessage.content.length>100?'...':'',\"\\\"\"]})})]}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:()=>setDeleteDialogOpen(false),children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{onClick:()=>handleDeleteMessage(selectedMessage===null||selectedMessage===void 0?void 0:selectedMessage.id),color:\"error\",variant:\"contained\",startIcon:/*#__PURE__*/_jsx(Delete,{}),children:\"Delete Message\"})]})]})]});};export default Messages;","map":{"version":3,"names":["React","useState","useEffect","useRef","Box","Paper","TextField","Button","Typography","List","ListItem","ListItemText","ListItemAvatar","Avatar","Divider","FormControl","InputLabel","Select","MenuItem","Chip","IconButton","Dialog","DialogTitle","DialogContent","DialogActions","Tabs","Tab","Alert","Tooltip","Badge","Send","Group","Person","Delete","MoreVert","Inbox","SentIcon","Refresh","Clear","Work","useAuth","axios","io","jsx","_jsx","jsxs","_jsxs","Messages","user","messages","setMessages","teamMembers","setTeamMembers","newMessage","setNewMessage","selectedRecipient","setSelectedRecipient","isGroupMessage","setIsGroupMessage","socket","setSocket","selectedMessage","setSelectedMessage","deleteDialogOpen","setDeleteDialogOpen","currentBox","setCurrentBox","loading","setLoading","messagesEndRef","fetchMessages","fetchTeamMembers","teamId","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","response","get","concat","data","error","console","filter","member","id","handleSendMessage","trim","messageData","content","recipientId","post","handleDeleteMessage","messageId","delete","prev","msg","handleBoxChange","event","newValue","canDeleteMessage","message","senderId","role","formatTime","timestamp","Date","toLocaleTimeString","hour","minute","formatDate","toLocaleDateString","getMessageRecipient","recipient","find","m","name","children","variant","gutterBottom","sx","height","display","flexDirection","p","borderBottom","borderColor","gap","mb","size","minWidth","value","label","onChange","e","target","mr","map","alignItems","fullWidth","multiline","rows","placeholder","onKeyDown","key","ctrlKey","preventDefault","fontSize","lineHeight","onClick","disabled","px","py","flexGrow","overflow","justifyContent","length","color","_message$senderName","width","senderName","charAt","primary","flexWrap","fontWeight","type","icon","secondary","title","backgroundColor","maxWidth","wordBreak","boxShadow","borderRadius","border","ref","borderTop","open","onClose","severity","substring","startIcon"],"sources":["/Users/rosavargas/ICD/client/src/components/messages/Messages.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport {\n  Box,\n  Paper,\n  TextField,\n  Button,\n  Typography,\n  List,\n  ListItem,\n  ListItemText,\n  ListItemAvatar,\n  Avatar,\n  Divider,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  Chip,\n  IconButton,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Tabs,\n  Tab,\n  Alert,\n  Tooltip,\n  Badge\n} from '@mui/material';\nimport {\n  Send,\n  Group,\n  Person,\n  Delete,\n  MoreVert,\n  Inbox,\n  Send as SentIcon,\n  Refresh,\n  Clear,\n  Work\n} from '@mui/icons-material';\nimport { useAuth } from '../../contexts/AuthContext';\nimport axios from 'axios';\nimport io from 'socket.io-client';\n\nconst Messages = () => {\n  const { user } = useAuth();\n  const [messages, setMessages] = useState([]);\n  const [teamMembers, setTeamMembers] = useState([]);\n  const [newMessage, setNewMessage] = useState('');\n  const [selectedRecipient, setSelectedRecipient] = useState('');\n  const [isGroupMessage, setIsGroupMessage] = useState(true);\n  const [socket, setSocket] = useState(null);\n  const [selectedMessage, setSelectedMessage] = useState(null);\n  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\n  const [currentBox, setCurrentBox] = useState('inbox');\n  const [loading, setLoading] = useState(false);\n  const messagesEndRef = useRef(null);\n\n  useEffect(() => {\n    fetchMessages();\n    fetchTeamMembers();\n    \n    // Socket.io connection disabled for production deployment\n    // Initialize socket connection\n    // const newSocket = io('http://localhost:5000');\n    // setSocket(newSocket);\n\n    // newSocket.emit('join-room', user.teamId);\n\n    // newSocket.on('new-message', (message) => {\n    //   if (currentBox === 'inbox') {\n    //     setMessages(prev => [message, ...prev]);\n    //   }\n    // });\n\n    // return () => newSocket.close();\n  }, [user.teamId, currentBox]);\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  const fetchMessages = async () => {\n    setLoading(true);\n    try {\n      const response = await axios.get(`/api/messages?box=${currentBox}`);\n      setMessages(response.data);\n    } catch (error) {\n      console.error('Error fetching messages:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchTeamMembers = async () => {\n    try {\n      const response = await axios.get('/api/users/team');\n      setTeamMembers(response.data.filter(member => member.id !== user.id));\n    } catch (error) {\n      console.error('Error fetching team members:', error);\n    }\n  };\n\n  const handleSendMessage = async () => {\n    if (!newMessage.trim()) return;\n\n    try {\n      const messageData = {\n        content: newMessage,\n        recipientId: isGroupMessage ? null : selectedRecipient,\n        isGroupMessage\n      };\n\n      const response = await axios.post('/api/messages', messageData);\n      \n      // Socket.io disabled for production deployment\n      // if (socket) {\n      //   socket.emit('send-message', {\n      //     ...response.data.data,\n      //     roomId: user.teamId\n      //   });\n      // }\n\n      setNewMessage('');\n      setSelectedRecipient('');\n      \n      // Refresh messages if in sent box\n      if (currentBox === 'sent') {\n        fetchMessages();\n      }\n    } catch (error) {\n      console.error('Error sending message:', error);\n    }\n  };\n\n  const handleDeleteMessage = async (messageId) => {\n    try {\n      await axios.delete(`/api/messages/${messageId}`);\n      setMessages(prev => prev.filter(msg => msg.id !== messageId));\n      setDeleteDialogOpen(false);\n      setSelectedMessage(null);\n    } catch (error) {\n      console.error('Error deleting message:', error);\n    }\n  };\n\n  const handleBoxChange = (event, newValue) => {\n    setCurrentBox(newValue);\n  };\n\n  const canDeleteMessage = (message) => {\n    return message.senderId === user.id || user.role === 'admin';\n  };\n\n  const formatTime = (timestamp) => {\n    return new Date(timestamp).toLocaleTimeString([], { \n      hour: '2-digit', \n      minute: '2-digit' \n    });\n  };\n\n  const formatDate = (timestamp) => {\n    return new Date(timestamp).toLocaleDateString();\n  };\n\n  const getMessageRecipient = (message) => {\n    if (message.isGroupMessage) return 'Group';\n    if (message.senderId === user.id) {\n      const recipient = teamMembers.find(m => m.id === message.recipientId);\n      return recipient ? `To: ${recipient.name}` : 'To: Unknown';\n    }\n    return '';\n  };\n\n  return (\n    <Box>\n      <Typography variant=\"h4\" gutterBottom>\n        Team Messages\n      </Typography>\n\n      <Paper sx={{ \n        height: '80vh', \n        display: 'flex', \n        flexDirection: 'column'\n      }}>\n        {/* Message Input Area */}\n        <Box sx={{ p: 3, borderBottom: 1, borderColor: 'divider' }}>\n          <Box sx={{ display: 'flex', gap: 2, mb: 3 }}>\n            <FormControl size=\"small\" sx={{ minWidth: 120 }}>\n              <InputLabel>Message Type</InputLabel>\n              <Select\n                value={isGroupMessage ? 'group' : 'private'}\n                label=\"Message Type\"\n                onChange={(e) => {\n                  setIsGroupMessage(e.target.value === 'group');\n                  setSelectedRecipient('');\n                }}\n              >\n                <MenuItem value=\"group\">\n                  <Group sx={{ mr: 1 }} />\n                  Group\n                </MenuItem>\n                <MenuItem value=\"private\">\n                  <Person sx={{ mr: 1 }} />\n                  Private\n                </MenuItem>\n              </Select>\n            </FormControl>\n\n            {!isGroupMessage && (\n              <FormControl size=\"small\" sx={{ minWidth: 200 }}>\n                <InputLabel>Recipient</InputLabel>\n                <Select\n                  value={selectedRecipient}\n                  label=\"Recipient\"\n                  onChange={(e) => setSelectedRecipient(e.target.value)}\n                >\n                  {teamMembers.map((member) => (\n                    <MenuItem key={member.id} value={member.id}>\n                      {member.name}\n                    </MenuItem>\n                  ))}\n                </Select>\n              </FormControl>\n            )}\n          </Box>\n\n          <Box sx={{ display: 'flex', gap: 2, alignItems: 'flex-end' }}>\n            <TextField\n              fullWidth\n              multiline\n              rows={4}\n              placeholder=\"Type your message here... (Press Ctrl+Enter to send)\"\n              value={newMessage}\n              onChange={(e) => setNewMessage(e.target.value)}\n              onKeyDown={(e) => {\n                if (e.key === 'Enter' && e.ctrlKey) {\n                  e.preventDefault();\n                  handleSendMessage();\n                }\n              }}\n              sx={{\n                '& .MuiInputBase-root': {\n                  fontSize: '1rem',\n                  lineHeight: 1.5\n                }\n              }}\n            />\n            <Button\n              variant=\"contained\"\n              onClick={handleSendMessage}\n              disabled={!newMessage.trim() || (!isGroupMessage && !selectedRecipient)}\n              sx={{ \n                minWidth: 'auto', \n                px: 3, \n                py: 2,\n                height: 'fit-content'\n              }}\n            >\n              <Send />\n            </Button>\n          </Box>\n        </Box>\n\n        {/* Inbox/Sent Tabs */}\n        <Box sx={{ borderBottom: 1, borderColor: 'divider' }}>\n          <Tabs \n            value={currentBox} \n            onChange={handleBoxChange}\n            sx={{ px: 2 }}\n          >\n            <Tab \n              value=\"inbox\" \n              label={\n                <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                  <Inbox />\n                  Inbox\n                </Box>\n              }\n            />\n            <Tab \n              value=\"sent\" \n              label={\n                <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                  <SentIcon />\n                  Sent\n                </Box>\n              }\n            />\n          </Tabs>\n        </Box>\n\n        {/* Messages List */}\n        <Box sx={{ flexGrow: 1, overflow: 'auto', p: 2 }}>\n          {loading ? (\n            <Box sx={{ display: 'flex', justifyContent: 'center', p: 4 }}>\n              <Typography>Loading messages...</Typography>\n            </Box>\n          ) : messages.length === 0 ? (\n            <Box sx={{ display: 'flex', justifyContent: 'center', p: 4 }}>\n              <Typography color=\"text.secondary\">\n                {currentBox === 'inbox' ? 'No messages in inbox' : 'No sent messages'}\n              </Typography>\n            </Box>\n          ) : (\n            <List>\n              {messages.map((message) => (\n                <ListItem\n                  key={message.id}\n                  sx={{\n                    flexDirection: 'column',\n                    alignItems: 'flex-start',\n                    mb: 2,\n                    p: 0\n                  }}\n                >\n                  <Box sx={{ display: 'flex', alignItems: 'center', width: '100%', mb: 1 }}>\n                    <ListItemAvatar>\n                      <Avatar>{message.senderName?.charAt(0)}</Avatar>\n                    </ListItemAvatar>\n                    <ListItemText\n                      primary={\n                        <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, flexWrap: 'wrap' }}>\n                          <Typography variant=\"subtitle2\" sx={{ fontWeight: 'bold' }}>\n                            {message.senderName}\n                          </Typography>\n                          {message.type === 'shift_assignment' && (\n                            <Chip\n                              label=\"Shift Assignment\"\n                              size=\"small\"\n                              color=\"success\"\n                              icon={<Work />}\n                            />\n                          )}\n                          {!message.isGroupMessage && !message.type && (\n                            <Chip\n                              label=\"Private\"\n                              size=\"small\"\n                              color=\"secondary\"\n                              icon={<Person />}\n                            />\n                          )}\n                          {message.senderId === user.id && (\n                            <Chip\n                              label=\"You\"\n                              size=\"small\"\n                              color=\"primary\"\n                            />\n                          )}\n                          {currentBox === 'sent' && !message.isGroupMessage && (\n                            <Typography variant=\"caption\" color=\"text.secondary\">\n                              {getMessageRecipient(message)}\n                            </Typography>\n                          )}\n                        </Box>\n                      }\n                      secondary={\n                        <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                          <Typography variant=\"caption\" color=\"text.secondary\">\n                            {formatTime(message.timestamp)}\n                          </Typography>\n                          <Typography variant=\"caption\" color=\"text.secondary\">\n                            {formatDate(message.timestamp)}\n                          </Typography>\n                        </Box>\n                      }\n                    />\n                    <Box sx={{ display: 'flex', gap: 1 }}>\n                      {canDeleteMessage(message) && (\n                        <Tooltip title=\"Delete message\">\n                          <IconButton\n                            size=\"small\"\n                            color=\"error\"\n                            onClick={() => {\n                              setSelectedMessage(message);\n                              setDeleteDialogOpen(true);\n                            }}\n                          >\n                            <Delete />\n                          </IconButton>\n                        </Tooltip>\n                      )}\n                    </Box>\n                  </Box>\n                  <Paper\n                    sx={{\n                      p: 3,\n                      backgroundColor: message.type === 'shift_assignment' ? 'success.light' : \n                                   message.senderId === user.id ? 'primary.light' : 'grey.100',\n                      color: message.senderId === user.id ? 'white' : 'text.primary',\n                      maxWidth: '85%',\n                      wordBreak: 'break-word',\n                      boxShadow: 2,\n                      borderRadius: 2,\n                      border: message.type === 'shift_assignment' ? '2px solid #4caf50' : 'none'\n                    }}\n                  >\n                    <Typography variant=\"body1\" sx={{ lineHeight: 1.6 }}>\n                      {message.content}\n                    </Typography>\n                  </Paper>\n                </ListItem>\n              ))}\n              <div ref={messagesEndRef} />\n            </List>\n          )}\n        </Box>\n\n        {/* Refresh Button */}\n        <Box sx={{ p: 2, borderTop: 1, borderColor: 'divider', display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n          <Typography variant=\"caption\" color=\"text.secondary\">\n            {messages.length} message{messages.length !== 1 ? 's' : ''} in {currentBox}\n          </Typography>\n          <Tooltip title=\"Refresh messages\">\n            <IconButton onClick={fetchMessages} size=\"small\">\n              <Refresh />\n            </IconButton>\n          </Tooltip>\n        </Box>\n      </Paper>\n\n      {/* Delete Confirmation Dialog */}\n      <Dialog \n        open={deleteDialogOpen} \n        onClose={() => setDeleteDialogOpen(false)}\n        maxWidth=\"sm\"\n        fullWidth\n      >\n        <DialogTitle>\n          🗑️ Delete Message\n        </DialogTitle>\n        <DialogContent>\n          <Alert severity=\"warning\" sx={{ mb: 2 }}>\n            This action cannot be undone.\n          </Alert>\n          <Typography variant=\"body2\" sx={{ mb: 2 }}>\n            Are you sure you want to delete this message?\n          </Typography>\n          {selectedMessage && (\n            <Paper sx={{ p: 2, backgroundColor: 'grey.50' }}>\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                \"{selectedMessage.content.substring(0, 100)}{selectedMessage.content.length > 100 ? '...' : ''}\"\n              </Typography>\n            </Paper>\n          )}\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setDeleteDialogOpen(false)}>\n            Cancel\n          </Button>\n          <Button \n            onClick={() => handleDeleteMessage(selectedMessage?.id)} \n            color=\"error\"\n            variant=\"contained\"\n            startIcon={<Delete />}\n          >\n            Delete Message\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </Box>\n  );\n};\n\nexport default Messages;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}